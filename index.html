<!DOCTYPE html>
<html lang="ka">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ულტრა თანამედროვე ავტორიზაცია</title>
    <style>
      :root {
        --primary-bg-color: #1a202c;
        --secondary-bg-color: #2d3748;
        --accent-color-1: #4fd1c5;
        --accent-color-2: #81e6d9;
        --card-bg: rgba(26, 32, 44, 0.5);
        --input-bg: rgba(45, 55, 72, 0.3);
        --border-color: rgba(255, 255, 255, 0.15);
        --light-text-color: #e2e8f0;
        --placeholder-color: rgba(226, 232, 240, 0.5);
        --validation-error-color: #fc8181;
        --validation-success-color: #68d391;
        --strength-weak: #fc8181;
        --strength-medium: #f6ad55;
        --strength-strong: #4fd1c5;
        --strength-very-strong: #68d391;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(
          135deg,
          var(--primary-bg-color) 0%,
          var(--secondary-bg-color) 100%
        );
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 12px;
        overflow: hidden;
        position: relative;
        color: var(--light-text-color);
      }
      canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        filter: blur(0.5px);
      }
      .main-container {
        display: flex;
        width: 100%;
        max-width: 900px;
        gap: 30px;
        align-items: center;
        position: relative;
        z-index: 1;
        min-height: 0;
      }
      .content-section {
        flex: 1;
        max-width: 400px;
        padding-right: 20px;
      }
      .content-section h1,
      .content-section p,
      .features-list li,
      .stat-item,
      .form-intro h2,
      .form-intro p {
        opacity: 0;
      }
      .content-section h1 {
        font-size: 32px;
        font-weight: 700;
        margin-bottom: 12px;
        background: linear-gradient(
          135deg,
          var(--accent-color-1) 0%,
          var(--accent-color-2) 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        line-height: 1.1;
        letter-spacing: -0.5px;
        animation: fade-in-up 0.8s ease-out 0.2s forwards;
      }
      .content-section p {
        font-size: 14px;
        line-height: 1.4;
        color: rgba(226, 232, 240, 0.8);
        margin-bottom: 16px;
        animation: fade-in-up 0.8s ease-out 0.4s forwards;
      }
      .features-list {
        list-style: none;
        margin-bottom: 16px;
      }
      .features-list li {
        display: flex;
        align-items: center;
        margin-bottom: 6px;
        font-size: 13px;
        color: rgba(226, 232, 240, 0.9);
        animation: fade-in-up 0.6s ease-out forwards;
      }
      .features-list li:nth-child(1) {
        animation-delay: 0.6s;
      }
      .features-list li:nth-child(2) {
        animation-delay: 0.7s;
      }
      .features-list li:nth-child(3) {
        animation-delay: 0.8s;
      }
      .features-list li:nth-child(4) {
        animation-delay: 0.9s;
      }
      .features-list li::before {
        content: "✓";
        color: var(--accent-color-1);
        font-weight: bold;
        font-size: 14px;
        margin-right: 8px;
        width: 16px;
        height: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(79, 209, 197, 0.1);
        border-radius: 50%;
        flex-shrink: 0;
      }
      .stats {
        display: flex;
        gap: 24px;
        margin-top: 16px;
      }
      .stat-item {
        text-align: left;
        animation: fade-in-up 0.6s ease-out forwards;
      }
      .stat-item:nth-child(1) {
        animation-delay: 1s;
      }
      .stat-item:nth-child(2) {
        animation-delay: 1.1s;
      }
      .stat-item:nth-child(3) {
        animation-delay: 1.2s;
      }
      .stat-number {
        font-size: 24px;
        font-weight: 700;
        color: var(--accent-color-1);
        display: block;
        line-height: 1;
      }
      .stat-label {
        font-size: 11px;
        color: rgba(226, 232, 240, 0.7);
        margin-top: 2px;
      }
      .auth-container {
        background: var(--card-bg);
        backdrop-filter: blur(35px) saturate(180%);
        -webkit-backdrop-filter: blur(35px) saturate(180%);
        border-radius: 18px;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
        overflow: hidden;
        width: 100%;
        max-width: 400px;
        max-height: 82vh;
        position: relative;
        border: 1px solid var(--border-color);
        animation: slideIn 0.8s ease-out forwards;
        display: flex;
        flex-direction: column;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4),
          inset 0 0 8px rgba(255, 255, 255, 0.05);
        flex-shrink: 0;
      }
      .scrollable-content-wrapper {
        flex-grow: 1;
        overflow-y: auto;
        overflow-x: hidden;
      }
      .scrollable-content-wrapper::-webkit-scrollbar {
        width: 5px;
      }
      .scrollable-content-wrapper::-webkit-scrollbar-track {
        background: transparent;
      }
      .scrollable-content-wrapper::-webkit-scrollbar-thumb {
        background: linear-gradient(
          135deg,
          var(--accent-color-1) 0%,
          var(--accent-color-2) 100%
        );
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .scrollable-content-wrapper::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(
          135deg,
          var(--accent-color-2) 0%,
          var(--accent-color-1) 100%
        );
      }
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(25px) scale(0.96);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      @keyframes fade-in-up {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .form-container {
        padding: 24px 24px;
        position: relative;
        flex-shrink: 0;
        overflow-x: hidden;
      }
      .form-intro {
        text-align: center;
        margin-bottom: 20px;
      }
      .form-intro h2 {
        font-size: 22px;
        margin-bottom: 4px;
        font-weight: 600;
        letter-spacing: -0.3px;
        color: var(--light-text-color);
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        animation: fade-in-up 0.8s ease-out 0.6s forwards;
      }
      .form-intro p {
        opacity: 0.8;
        font-size: 12px;
        line-height: 1.3;
        color: rgba(226, 232, 240, 0.7);
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        animation: fade-in-up 0.8s ease-out 0.8s forwards;
      }
      .form-toggle {
        display: flex;
        margin-bottom: 20px;
        background: var(--input-bg);
        border-radius: 50px;
        padding: 2px;
        position: relative;
        box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.12);
      }
      .toggle-btn {
        flex: 1;
        padding: 6px 14px;
        background: none;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
        font-weight: 600;
        color: rgba(226, 232, 240, 0.7);
        position: relative;
        z-index: 2;
        font-size: 11px;
      }
      .toggle-btn.active {
        color: white;
      }
      .toggle-slider {
        position: absolute;
        top: 2px;
        left: 2px;
        width: calc(50% - 2px);
        height: calc(100% - 4px);
        background: linear-gradient(
          135deg,
          var(--accent-color-1) 0%,
          var(--accent-color-2) 100%
        );
        border-radius: 50px;
        transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
        z-index: 1;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15),
          inset 0 1px 2px rgba(255, 255, 255, 0.15);
      }
      .toggle-slider.register {
        transform: translateX(100%);
      }
      .form-group {
        margin-bottom: 16px;
        position: relative;
      }
      .input-with-icon {
        position: relative;
        display: flex;
        align-items: center;
      }
      .form-input {
        width: 100%;
        padding: 12px 16px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        font-size: 14px;
        transition: all 0.3s ease;
        background: var(--input-bg);
        color: var(--light-text-color);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.08);
        padding-right: 40px;
      }
      .form-input:-webkit-autofill {
        -webkit-box-shadow: 0 0 0px 1000px var(--input-bg) inset !important;
        -webkit-text-fill-color: var(--light-text-color) !important;
        border: 1px solid var(--border-color) !important;
        transition: background-color 5000s ease-in-out 0s !important;
      }
      .form-input.invalid {
        border-color: var(--validation-error-color) !important;
        color: var(--validation-error-color) !important;
      }
      .form-input.valid {
        border-color: var(--validation-success-color) !important;
        color: var(--validation-success-color) !important;
      }
      .form-input.invalid:-webkit-autofill {
        -webkit-box-shadow: 0 0 0px 1000px var(--input-bg) inset !important;
        -webkit-text-fill-color: var(--validation-error-color) !important;
        border-color: var(--validation-error-color) !important;
      }
      .form-input.valid:-webkit-autofill {
        -webkit-box-shadow: 0 0 0px 1000px var(--input-bg) inset !important;
        -webkit-text-fill-color: var(--validation-success-color) !important;
        border-color: var(--validation-success-color) !important;
      }
      .form-input:focus {
        outline: none;
        background: rgba(45, 55, 72, 0.5);
        box-shadow: 0 0 0 2px rgba(79, 209, 197, 0.12),
          0 0 12px rgba(79, 209, 197, 0.4);
      }
      .form-input:-webkit-autofill:focus {
        -webkit-box-shadow: 0 0 0px 1000px rgba(45, 55, 72, 0.5) inset,
          0 0 0 2px rgba(79, 209, 197, 0.12), 0 0 12px rgba(79, 209, 197, 0.4) !important;
      }
      .form-input.invalid:focus {
        border-color: var(--validation-error-color) !important;
        color: var(--validation-error-color) !important;
        box-shadow: 0 0 0 2px rgba(252, 129, 129, 0.12),
          0 0 12px rgba(252, 129, 129, 0.4) !important;
      }
      .form-input.valid:focus {
        border-color: var(--validation-success-color) !important;
        color: var(--validation-success-color) !important;
        box-shadow: 0 0 0 2px rgba(104, 211, 145, 0.12),
          0 0 12px rgba(104, 211, 145, 0.4) !important;
      }
      .form-input::placeholder {
        color: var(--placeholder-color);
      }
      .password-toggle {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        cursor: pointer;
        padding: 3px;
        color: var(--light-text-color);
        opacity: 0.6;
        transition: opacity 0.2s ease;
        z-index: 2;
      }
      .password-toggle:hover {
        opacity: 1;
      }
      .password-toggle .icon {
        width: 16px;
        height: 16px;
      }
      .submit-btn {
        width: 100%;
        padding: 11px;
        background: linear-gradient(
          135deg,
          var(--accent-color-1) 0%,
          var(--accent-color-2) 100%
        );
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
        position: relative;
        overflow: hidden;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.18);
        display: flex;
        align-items: center;
        justify-content: center;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      }
      .submit-btn:hover {
        transform: translateY(-1px) scale(1.005);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
      }
      .submit-btn:active {
        transform: translateY(0) scale(0.995);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
      }
      .form-section {
        display: none;
        animation: fadeIn 0.5s ease forwards;
      }
      .form-section.active {
        display: block;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(15px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .forgot-password {
        text-align: center;
        margin-top: 12px;
      }
      .forgot-password a {
        color: var(--accent-color-1);
        text-decoration: none;
        font-size: 12px;
        transition: color 0.3s ease;
        font-weight: 500;
      }
      .forgot-password a:hover {
        color: var(--accent-color-2);
        text-decoration: underline;
      }
      .error-message {
        color: var(--validation-error-color);
        font-size: 11px;
        margin-top: 4px;
        display: none;
        font-weight: 500;
        opacity: 0;
        transform: translateY(6px);
        transition: opacity 0.3s ease, transform 0.3s ease;
      }
      .error-message.show {
        opacity: 1;
        transform: translateY(0);
      }
      .success-message {
        color: var(--validation-success-color);
        font-size: 12px;
        margin-top: 10px;
        text-align: center;
        display: none;
        font-weight: 500;
        opacity: 0;
        transform: translateY(6px);
        transition: opacity 0.3s ease, transform 0.3s ease;
      }
      .success-message.show {
        opacity: 1;
        transform: translateY(0);
      }
      .password-strength-indicator {
        margin-top: 6px;
        height: 5px;
        background: rgba(255, 255, 255, 0.08);
        border-radius: 2px;
        overflow: hidden;
        position: relative;
      }
      .strength-bar {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #f00, #ff0, #0f0);
        transition: width 0.3s ease-in-out, background 0.3s ease-in-out;
        border-radius: 2px;
      }
      .strength-text {
        position: absolute;
        top: -16px;
        left: 0;
        font-size: 10px;
        font-weight: 500;
        color: var(--light-text-color);
        opacity: 0.7;
        transition: color 0.3s ease;
      }
      .strength-bar.weak {
        background: var(--strength-weak);
      }
      .strength-bar.medium {
        background: var(--strength-medium);
      }
      .strength-bar.strong {
        background: var(--strength-strong);
      }
      .strength-bar.very-strong {
        background: var(--strength-very-strong);
      }
      .strength-text.weak {
        color: var(--strength-weak);
      }
      .strength-text.medium {
        color: var(--strength-medium);
      }
      .strength-text.strong {
        color: var(--strength-strong);
      }
      .strength-text.very-strong {
        color: var(--strength-very-strong);
      }
      .password-requirements {
        margin-top: 8px;
        font-size: 11px;
        color: rgba(226, 232, 240, 0.7);
      }
      .password-requirements div {
        display: flex;
        align-items: center;
        margin-bottom: 3px;
      }
      .password-requirements .icon {
        margin-right: 5px;
        width: 12px;
        height: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--validation-error-color);
        transition: color 0.2s ease;
      }
      .password-requirements .icon.valid {
        color: var(--validation-success-color);
      }
      .password-strength-indicator,
      .password-requirements {
        display: none;
        opacity: 0;
        transition: opacity 0.3s ease, transform 0.3s ease;
        transform: translateY(-6px);
      }
      .password-strength-indicator.show,
      .password-requirements.show {
        display: block;
        opacity: 1;
        transform: translateY(0);
      }
      .password-strength-indicator.show {
        display: block;
      }
      @media (max-width: 1024px) {
        body {
          padding: 8px;
        }
        .main-container {
          flex-direction: column;
          gap: 20px;
          max-width: 420px;
        }
        .content-section {
          text-align: center;
          padding-right: 0;
          max-width: none;
        }
        .content-section h1 {
          font-size: 28px;
          margin-bottom: 8px;
        }
        .content-section p {
          font-size: 13px;
          margin-bottom: 12px;
        }
        .features-list {
          margin-bottom: 12px;
        }
        .features-list li {
          margin-bottom: 4px;
          font-size: 12px;
        }
        .stats {
          justify-content: center;
          gap: 20px;
          margin-top: 12px;
        }
        .stat-number {
          font-size: 20px;
        }
        .stat-label {
          font-size: 11px;
        }
        .auth-container {
          max-width: 100%;
          max-height: 65vh;
        }
      }
      @media (max-width: 480px) {
        body {
          padding: 6px;
        }
        .main-container {
          gap: 16px;
        }
        .content-section h1 {
          font-size: 24px;
        }
        .content-section p {
          font-size: 12px;
        }
        .features-list li {
          font-size: 11px;
        }
        .stats {
          gap: 16px;
        }
        .stat-number {
          font-size: 18px;
        }
        .stat-label {
          font-size: 10px;
        }
        .auth-container {
          border-radius: 12px;
          max-height: 70vh;
        }
        .form-container {
          padding: 20px 18px;
        }
        .form-intro h2 {
          font-size: 18px;
        }
        .form-intro p {
          font-size: 11px;
        }
        .form-input {
          padding: 10px 14px;
          font-size: 13px;
          padding-right: 36px;
        }
        .submit-btn {
          padding: 10px;
          font-size: 12px;
        }
        .toggle-btn {
          padding: 5px 12px;
          font-size: 10px;
        }
        .password-toggle .icon {
          width: 14px;
          height: 14px;
        }
      }
      .loading {
        display: none;
        width: 16px;
        height: 16px;
        border: 2px solid rgba(255, 255, 255, 0.5);
        border-top: 2px solid white;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <canvas id="particleCanvas"></canvas>
    <div class="main-container">
      <div class="content-section">
        <h1>ციფრული მომავალი</h1>
        <p>შემოუერთდით ათასობით მომხმარებელს უსაფრთხო პლატფორმაზე.</p>
        <ul class="features-list">
          <li>მაქსიმალური უსაფრთხოება</li>
          <li>სწრაფი რეგისტრაცია</li>
          <li>24/7 მხარდაჭერა</li>
          <li>თანამედროვე ინტერფეისი</li>
        </ul>
        <div class="stats">
          <div class="stat-item">
            <span class="stat-number">50K+</span>
            <div class="stat-label">მომხმარებელი</div>
          </div>
          <div class="stat-item">
            <span class="stat-number">99.9%</span>
            <div class="stat-label">სტაბილურობა</div>
          </div>
          <div class="stat-item">
            <span class="stat-number">24/7</span>
            <div class="stat-label">მხარდაჭერა</div>
          </div>
        </div>
      </div>
      <div class="auth-container">
        <div class="scrollable-content-wrapper">
          <div class="form-container">
            <div class="form-intro">
              <h2>კეთილი იყოს მობრძანება</h2>
              <p>შედით ან დარეგისტრირდით</p>
            </div>
            <div class="form-toggle">
              <button
                class="toggle-btn active"
                onclick="switchForm('login', this)"
              >
                შესვლა
              </button>
              <button class="toggle-btn" onclick="switchForm('register', this)">
                რეგისტრაცია
              </button>
              <div class="toggle-slider" id="toggleSlider"></div>
            </div>
            <div class="form-section active" id="loginForm">
              <form onsubmit="handleLogin(event)">
                <div class="form-group">
                  <input
                    type="email"
                    class="form-input"
                    id="loginEmail"
                    placeholder="ელ. ფოსტა"
                    required
                    oninput="debouncedValidateField(this, 'loginEmailError')"
                  />
                  <div class="error-message" id="loginEmailError"></div>
                </div>
                <div class="form-group">
                  <div class="input-with-icon">
                    <input
                      type="password"
                      class="form-input"
                      id="loginPassword"
                      placeholder="პაროლი"
                      required
                      oninput="debouncedValidateField(this, 'loginPasswordError')"
                    />
                    <button
                      type="button"
                      class="password-toggle"
                      onclick="togglePasswordVisibility('loginPassword', this)"
                    >
                      <svg
                        class="icon eye-icon"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path
                          d="M2.06 12.06a12.06 12.06 0 0 1 20.06 0M12 17a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"
                        />
                        <path d="M12 12.01V12" />
                      </svg>
                    </button>
                  </div>
                  <div class="error-message" id="loginPasswordError"></div>
                </div>
                <button type="submit" class="submit-btn">
                  <span class="btn-text">შესვლა</span>
                  <div class="loading" id="loginLoading"></div>
                </button>
                <div class="success-message" id="loginSuccess"></div>
              </form>
              <div class="forgot-password">
                <a href="#" onclick="showForgotPassword()"
                  >დაგავიწყდათ პაროლი?</a
                >
              </div>
            </div>
            <div class="form-section" id="registerForm">
              <form onsubmit="handleRegister(event)">
                <div class="form-group">
                  <input
                    type="text"
                    class="form-input"
                    id="registerName"
                    placeholder="სახელი და გვარი"
                    required
                    oninput="debouncedValidateField(this, 'registerNameError')"
                  />
                  <div class="error-message" id="registerNameError"></div>
                </div>
                <div class="form-group">
                  <input
                    type="email"
                    class="form-input"
                    id="registerEmail"
                    placeholder="ელ. ფოსტა"
                    required
                    oninput="debouncedValidateField(this, 'registerEmailError')"
                  />
                  <div class="error-message" id="registerEmailError"></div>
                </div>
                <div class="form-group">
                  <div class="input-with-icon">
                    <input
                      type="password"
                      class="form-input"
                      id="registerPassword"
                      placeholder="პაროლი"
                      required
                      oninput="debouncedValidateRegisterPassword(this, 'registerPasswordError')"
                    />
                    <button
                      type="button"
                      class="password-toggle"
                      onclick="togglePasswordVisibility('registerPassword', this)"
                    >
                      <svg
                        class="icon eye-icon"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path
                          d="M2.06 12.06a12.06 12.06 0 0 1 20.06 0M12 17a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"
                        />
                        <path d="M12 12.01V12" />
                      </svg>
                    </button>
                  </div>
                  <div class="error-message" id="registerPasswordError"></div>
                  <div
                    class="password-strength-indicator"
                    id="passwordStrengthIndicator"
                  >
                    <div class="strength-bar" id="strengthBar"></div>
                    <span class="strength-text" id="strengthText"></span>
                  </div>
                  <div class="password-requirements">
                    <div>
                      <span class="icon" id="reqLength">✖</span>
                      <span>მინიმუმ 6 სიმბოლო</span>
                    </div>
                    <div>
                      <span class="icon" id="reqUppercase">✖</span>
                      <span>მინიმუმ ერთი დიდი ასო</span>
                    </div>
                    <div>
                      <span class="icon" id="reqLowercase">✖</span>
                      <span>მინიმუმ ერთი პატარა ასო</span>
                    </div>
                    <div>
                      <span class="icon" id="reqNumber">✖</span>
                      <span>მინიმუმ ერთი ციფრი</span>
                    </div>
                    <div>
                      <span class="icon" id="reqSpecial">✖</span>
                      <span>მინიმუმ ერთი სპეციალური სიმბოლო</span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <div class="input-with-icon">
                    <input
                      type="password"
                      class="form-input"
                      id="registerConfirmPassword"
                      placeholder="გაიმეორეთ პაროლი"
                      required
                      oninput="debouncedValidateField(this, 'registerConfirmError')"
                    />
                    <button
                      type="button"
                      class="password-toggle"
                      onclick="togglePasswordVisibility('registerConfirmPassword', this)"
                    >
                      <svg
                        class="icon eye-icon"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path
                          d="M2.06 12.06a12.06 12.06 0 0 1 20.06 0M12 17a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"
                        />
                        <path d="M12 12.01V12" />
                      </svg>
                    </button>
                  </div>
                  <div class="error-message" id="registerConfirmError"></div>
                </div>
                <button type="submit" class="submit-btn">
                  <span class="btn-text">რეგისტრაცია</span>
                  <div class="loading" id="registerLoading"></div>
                </button>
                <div class="success-message" id="registerSuccess"></div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      // მომხმარებლების მასივის ინიციალიზაცია localStorage-დან
      let users = JSON.parse(localStorage.getItem("registeredUsers")) || [];

      // --- ნებადართული ელ. ფოსტების სია ---
      // მხოლოდ ამ სიაში არსებული ელ. ფოსტის მისამართებით არის შესაძლებელი რეგისტრაცია.
      // შეგიძლიათ შეცვალოთ ეს სია თქვენი საჭიროებების მიხედვით.
      const allowedEmails = [
        "user1@example.com",
        "admin@example.com",
        "test@test.com",
      ];
      // -----------------------------------

      function switchForm(formType, clickedButton) {
        const loginForm = document.getElementById("loginForm");
        const registerForm = document.getElementById("registerForm");
        const toggleSlider = document.getElementById("toggleSlider");
        const toggleBtns = document.querySelectorAll(".toggle-btn");
        clearAllErrors();
        clearAllInputValidationStates();
        updatePasswordStrengthIndicator("");
        updatePasswordRequirements("");
        document.getElementById("loginSuccess").style.display = "none";
        document.getElementById("registerSuccess").style.display = "none";
        if (formType === "login") {
          loginForm.classList.add("active");
          registerForm.classList.remove("active");
          toggleSlider.classList.remove("register");
        } else {
          registerForm.classList.add("active");
          loginForm.classList.remove("active");
          toggleSlider.classList.add("register");
        }
        toggleBtns.forEach((btn) => btn.classList.remove("active"));
        clickedButton.classList.add("active");
      }
      function debounce(func, delay) {
        let timeout;
        return function (...args) {
          const context = this;
          clearTimeout(timeout);
          timeout = setTimeout(() => func.apply(context, args), delay);
        };
      }
      function validateField(inputElement, errorElementId) {
        const value = inputElement.value;
        let errorMessage = "";
        inputElement.classList.remove("invalid", "valid");
        if (value.trim() === "") {
          clearSpecificError(errorElementId);
          if (inputElement.id === "registerPassword") {
            updatePasswordStrengthIndicator("");
            updatePasswordRequirements("");
          } else if (inputElement.id === "registerConfirmPassword") {
            inputElement.classList.remove("invalid", "valid");
          }
          return;
        }
        if (inputElement.type === "email") {
          if (!validateEmail(value)) {
            errorMessage = "გთხოვთ შეიყვანოთ სწორი ელ. ფოსტის მისამართი";
          }
        } else if (
          inputElement.type === "password" ||
          inputElement.type === "text"
        ) {
          if (inputElement.id === "registerPassword") {
            const requirements = {
              length: value.length >= 6,
              uppercase: /[A-Z]/.test(value),
              lowercase: /[a-z]/.test(value),
              number: /[0-9]/.test(value),
              special: /[!@#$%^&*(),.?":{}|<>]/.test(value),
            };
            updatePasswordRequirements(value);
            if (!requirements.length) {
              errorMessage = "პაროლი უნდა შეიცავდეს მინიმუმ 6 სიმბოლოს";
            } else if (!requirements.uppercase) {
              errorMessage = "პაროლი უნდა შეიცავდეს მინიმუმ ერთ დიდ ასოს";
            } else if (!requirements.lowercase) {
              errorMessage = "პაროლი უნდა შეიცავდეს მინიმუმ ერთ პატარა ასოს";
            } else if (!requirements.number) {
              errorMessage = "პაროლი უნდა შეიცავდეს მინიმუმ ერთ ციფრს";
            } else if (!requirements.special) {
              errorMessage =
                "პაროლი უნდა შეიცავდეს მინიმუმ ერთ სპეციალურ სიმბოლოს";
            }
          } else if (inputElement.id === "loginPassword") {
            if (value.length < 6) {
              errorMessage = "პაროლი უნდა შეიცავდეს მინიმუმ 6 სიმბოლოს";
            }
          } else if (inputElement.id === "registerConfirmPassword") {
            const passwordInput = document.getElementById("registerPassword");
            if (value !== passwordInput.value) {
              errorMessage = "პაროლები არ ემთხვევა";
            }
          }
        } else if (
          inputElement.type === "text" &&
          inputElement.id === "registerName"
        ) {
          if (value.length < 2) {
            errorMessage = "სახელი უნდა შეიცავდეს მინიმუმ 2 სიმბოლოს";
          }
        }
        if (errorMessage) {
          showError(errorElementId, errorMessage);
          inputElement.classList.add("invalid");
        } else {
          clearSpecificError(errorElementId);
          inputElement.classList.add("valid");
        }
      }
      const debouncedValidateField = debounce(
        (inputElement, errorElementId) => {
          validateField(inputElement, errorElementId);
        },
        300
      );
      const debouncedValidateRegisterPassword = debounce(
        (inputElement, errorElementId) => {
          validateField(inputElement, errorElementId);
          updatePasswordStrengthIndicator(inputElement.value);
          updatePasswordRequirements(inputElement.value);
        },
        300
      );
      function checkPasswordStrength(password) {
        let score = 0;
        if (password.length > 0) {
          score = 1;
        }
        if (password.length >= 8) score++;
        if (/[A-Z]/.test(password)) score++;
        if (/[a-z]/.test(password)) score++;
        if (/[0-9]/.test(password)) score++;
        if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) score++;
        if (
          password.length >= 12 &&
          /[A-Z]/.test(password) &&
          /[a-z]/.test(password) &&
          /[0-9]/.test(password) &&
          /[!@#$%^&*(),.?":{}|<>]/.test(password)
        ) {
          score++;
        }
        return score;
      }
      function updatePasswordStrengthIndicator(password) {
        const strengthBar = document.getElementById("strengthBar");
        const strengthText = document.getElementById("strengthText");
        const strengthIndicator = document.getElementById(
          "passwordStrengthIndicator"
        );
        if (!strengthBar || !strengthText || !strengthIndicator) return;
        if (password.length > 0) {
          strengthIndicator.classList.add("show");
        } else {
          strengthIndicator.classList.remove("show");
          return;
        }
        const score = checkPasswordStrength(password);
        let width = 0;
        let text = "";
        let className = "";
        if (score <= 2) {
          width = 25;
          text = "სუსტი";
          className = "weak";
        } else if (score === 3) {
          width = 50;
          text = "საშუალო";
          className = "medium";
        } else if (score === 4) {
          width = 75;
          text = "ძლიერი";
          className = "strong";
        } else {
          width = 100;
          text = "ძალიან ძლიერი";
          className = "very-strong";
        }
        strengthBar.style.width = `${width}%`;
        strengthText.textContent = text;
        strengthBar.classList.remove("weak", "medium", "strong", "very-strong");
        strengthText.classList.remove(
          "weak",
          "medium",
          "strong",
          "very-strong"
        );
        if (className) {
          strengthBar.classList.add(className);
          strengthText.classList.add(className);
        }
      }
      function updatePasswordRequirements(password) {
        const reqLength = document.getElementById("reqLength");
        const reqUppercase = document.getElementById("reqUppercase");
        const reqLowercase = document.getElementById("reqLowercase");
        const reqNumber = document.getElementById("reqNumber");
        const reqSpecial = document.getElementById("reqSpecial");
        const requirementsContainer = document.querySelector(
          ".password-requirements"
        );
        if (
          !reqLength ||
          !reqUppercase ||
          !reqLowercase ||
          !reqNumber ||
          !reqSpecial ||
          !requirementsContainer
        )
          return;
        if (password.length > 0) {
          requirementsContainer.classList.add("show");
        } else {
          requirementsContainer.classList.remove("show");
          return;
        }
        const checks = {
          length: password.length >= 6,
          uppercase: /[A-Z]/.test(password),
          lowercase: /[a-z]/.test(password),
          number: /[0-9]/.test(password),
          special: /[!@#$%^&*(),.?":{}|<>]/.test(password),
        };
        function updateRequirement(element, isValid) {
          if (isValid) {
            element.textContent = "✔";
            element.classList.add("valid");
          } else {
            element.textContent = "✖";
            element.classList.remove("valid");
          }
        }
        updateRequirement(reqLength, checks.length);
        updateRequirement(reqUppercase, checks.uppercase);
        updateRequirement(reqLowercase, checks.lowercase);
        updateRequirement(reqNumber, checks.number);
        updateRequirement(reqSpecial, checks.special);
      }
      function togglePasswordVisibility(inputId, buttonElement) {
        const input = document.getElementById(inputId);
        const icon = buttonElement.querySelector(".icon");
        if (input.type === "password") {
          input.type = "text";
          icon.innerHTML =
            '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-4.41 0-7.88-2.75-10-7.25.7-1.79 2.1-3.34 4.13-4.93M12 4c4.41 0 7.88 2.75 10 7.25-.7 1.79-2.1 3.34-4.13 4.93"/><path d="M12 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path d="M2 2l20 20"/>';
        } else {
          input.type = "password";
          icon.innerHTML =
            '<path d="M2.06 12.06a12.06 12.06 0 0 1 20.06 0M12 17a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><path d="M12 12.01V12"/>';
        }
      }
      function handleLogin(event) {
        event.preventDefault();
        const form = event.target;
        const emailInput = document.getElementById("loginEmail");
        const passwordInput = document.getElementById("loginPassword");
        const loading = document.getElementById("loginLoading");
        const btnText = form.querySelector(".btn-text");
        const successMsg = document.getElementById("loginSuccess");
        clearAllErrors();
        successMsg.style.display = "none";
        validateField(emailInput, "loginEmailError");
        validateField(passwordInput, "loginPasswordError");
        const allInputs = form.querySelectorAll(".form-input");
        let isValid = true;
        allInputs.forEach((input) => {
          if (
            input.classList.contains("invalid") ||
            input.value.trim() === ""
          ) {
            isValid = false;
          }
        });
        if (!isValid) {
          return;
        }
        loading.style.display = "block";
        btnText.style.display = "none";
        setTimeout(() => {
          loading.style.display = "none";
          btnText.style.display = "block";
          const email = emailInput.value;
          const password = passwordInput.value;
          // მომხმარებლის მოძიება შენახულ მომხმარებლებში
          const user = users.find(
            (u) => u.email === email && u.password === password
          );
          if (user) {
            successMsg.textContent = "წარმატებით შეხვედით სისტემაში!";
            successMsg.style.display = "block";
            successMsg.classList.add("show");
            // მომხმარებლის მონაცემების შენახვა localStorage-ში
            localStorage.setItem(
              "loggedInUser",
              JSON.stringify({ name: user.name, email: user.email })
            );
            setTimeout(() => {
              window.location.href = "dashboard.html"; // გადასვლა dashboard.html-ზე
            }, 1000);
            form.reset();
            clearAllInputValidationStates();
          } else {
            showError("loginEmailError", "არასწორი ელ. ფოსტა ან პაროლი!");
            emailInput.classList.add("invalid");
            passwordInput.classList.add("invalid");
          }
        }, 2000);
      }
      function handleRegister(event) {
        event.preventDefault();
        const form = event.target;
        const nameInput = document.getElementById("registerName");
        const emailInput = document.getElementById("registerEmail");
        const passwordInput = document.getElementById("registerPassword");
        const confirmPasswordInput = document.getElementById(
          "registerConfirmPassword"
        );
        const loading = document.getElementById("registerLoading");
        const btnText = form.querySelector(".btn-text");
        const successMsg = document.getElementById("registerSuccess");

        // 1. ყველა შეცდომის გასუფთავება და ვალიდაციის მდგომარეობის გადატვირთვა
        clearAllErrors();
        successMsg.style.display = "none";

        // 2. ველების ვალიდაცია
        validateField(nameInput, "registerNameError");
        validateField(emailInput, "registerEmailError");
        validateField(passwordInput, "registerPasswordError");
        validateField(confirmPasswordInput, "registerConfirmError");

        // 3. შემოწმება, არის თუ არა რომელიმე ველი არასწორი ან ცარიელი
        const allInputs = form.querySelectorAll(".form-input");
        let isValid = true;
        allInputs.forEach((input) => {
          if (
            input.classList.contains("invalid") ||
            input.value.trim() === ""
          ) {
            isValid = false;
          }
        });

        // თუ რომელიმე ველი არასწორია, შეაჩერე რეგისტრაცია
        if (!isValid) {
          return;
        }

        // 4. ჩატვირთვის ინდიკატორის ჩვენება
        loading.style.display = "block";
        btnText.style.display = "none";

        setTimeout(() => {
          loading.style.display = "none";
          btnText.style.display = "block";

          const name = nameInput.value;
          const email = emailInput.value;
          const password = passwordInput.value;

          // 5. შემოწმება, არის თუ არა ელ. ფოსტა ნებადართულ სიაში
          // შემოწმება, არის თუ არა ელ. ფოსტა ნებადართულ დომენში (მაგ. @mail.ru)
          // ან არის თუ არა ზუსტად ნებადართულ სიაში
          const isMailRuDomain = email.endsWith("@mail.ru");
          const isExactlyAllowed = allowedEmails.includes(email);

          if (!isMailRuDomain && !isExactlyAllowed) {
            showError(
              "registerEmailError",
              "ეს ელ. ფოსტა არ არის ნებადართული რეგისტრაციისთვის! (მხოლოდ @mail.ru ან წინასწარ განსაზღვრული მისამართები)"
            );
            emailInput.classList.add("invalid");
            return; // შეაჩერე რეგისტრაცია
          }

          // 6. შემოწმება, არსებობს თუ არა უკვე ასეთი ელ. ფოსტა
          if (users.some((u) => u.email === email)) {
            showError(
              "registerEmailError",
              "ეს ელ. ფოსტა უკვე რეგისტრირებულია!"
            );
            emailInput.classList.add("invalid");
            return; // შეაჩერე რეგისტრაცია
          }

          // 7. მომხმარებლის დამატება და შენახვა
          users.push({ name, email, password });
          localStorage.setItem("registeredUsers", JSON.stringify(users));

          // 8. წარმატების შეტყობინების ჩვენება და ფორმის გასუფთავება
          successMsg.textContent = "რეგისტრაცია წარმატებით დასრულდა!";
          successMsg.style.display = "block";
          successMsg.classList.add("show");
          form.reset();
          clearAllInputValidationStates();
          updatePasswordStrengthIndicator("");
          updatePasswordRequirements("");

          // 9. შესვლის ფორმაზე გადასვლა
          setTimeout(() => {
            switchForm(
              "login",
              document.querySelector(".toggle-btn:first-child")
            );
          }, 1500);
        }, 2000);
      }
      function validateEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }
      function showError(elementId, message) {
        const errorElement = document.getElementById(elementId);
        errorElement.textContent = message;
        errorElement.style.display = "block";
        errorElement.classList.add("show");
      }
      function clearSpecificError(elementId) {
        const errorElement = document.getElementById(elementId);
        if (errorElement) {
          errorElement.style.display = "none";
          errorElement.textContent = "";
          errorElement.classList.remove("show");
        }
      }
      function clearAllErrors() {
        const errorElements = document.querySelectorAll(".error-message");
        errorElements.forEach((element) => {
          element.style.display = "none";
          element.textContent = "";
          element.classList.remove("show");
        });
      }
      function clearAllInputValidationStates() {
        const inputs = document.querySelectorAll(".form-input");
        inputs.forEach((input) => {
          input.classList.remove("invalid", "valid");
        });
      }
      function showForgotPassword() {
        alert("პაროლის აღდგენის ლინკი გამოგზავნილია თქვენს ელ. ფოსტაზე!");
      }
      const canvas = document.getElementById("particleCanvas");
      const ctx = canvas.getContext("2d");
      let particles = [];
      let mouse = {
        x: null,
        y: null,
        radius: 120,
      };
      function setCanvasSize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      setCanvasSize();
      window.addEventListener("resize", setCanvasSize);
      window.addEventListener("mousemove", function (event) {
        mouse.x = event.x;
        mouse.y = event.y;
      });
      window.addEventListener("mouseout", function () {
        mouse.x = null;
        mouse.y = null;
      });
      const styleComputed = getComputedStyle(document.body);
      const accentColor1 = styleComputed
        .getPropertyValue("--accent-color-1")
        .trim();
      const accentColor2 = styleComputed
        .getPropertyValue("--accent-color-2")
        .trim();
      // ფერების RGB მნიშვნელობების წინასწარი გამოთვლა
      function hexToRgb(hex) {
        const bigint = parseInt(hex.slice(1), 16);
        const r = (bigint >> 16) & 255;
        const g = (bigint >> 8) & 255;
        const b = bigint & 255;
        return { r, g, b };
      }
      const rgbAccentColor1 = hexToRgb(accentColor1);
      const rgbAccentColor2 = hexToRgb(accentColor2);
      class Particle {
        constructor(x, y, color, size, speedX, speedY) {
          this.x = x;
          this.y = y;
          this.size = size;
          this.baseSize = size;
          this.speedX = speedX;
          this.speedY = speedY;
          this.baseSpeedX = speedX;
          this.baseSpeedY = speedY;
          this.color = color;
          this.opacity = Math.random() * 0.4 + 0.2; // გამჭვირვალობის დიაპაზონი
        }
        update() {
          if (mouse.x && mouse.y) {
            let dx = mouse.x - this.x;
            let dy = mouse.y - this.y;
            let distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < mouse.radius) {
              let forceDirectionX = dx / distance;
              let forceDirectionY = dy / distance;
              let maxForce = 10;
              let repulsionRadius = mouse.radius;
              let force = (repulsionRadius - distance) / repulsionRadius;
              let directionX = forceDirectionX * force * maxForce;
              let directionY = forceDirectionY * force * maxForce;
              this.speedX -= directionX * 0.06;
              this.speedY -= directionY * 0.06;
            } else {
              if (Math.abs(this.speedX - this.baseSpeedX) > 0.01) {
                this.speedX += (this.baseSpeedX - this.speedX) * 0.02;
              }
              if (Math.abs(this.speedY - this.baseSpeedY) > 0.01) {
                this.speedY += (this.baseSpeedY - this.speedY) * 0.02;
              }
            }
          }
          this.x += this.speedX;
          this.y += this.speedY;
          if (this.x + this.size > canvas.width || this.x - this.size < 0) {
            this.speedX *= -1;
            this.x = Math.max(
              this.size,
              Math.min(this.x, canvas.width - this.size)
            );
          }
          if (this.y + this.size > canvas.height || this.y - this.size < 0) {
            this.speedY *= -1;
            this.y = Math.max(
              this.size,
              Math.min(this.y, canvas.height - this.size)
            );
          }
        }
        draw() {
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          const rgb = hexToRgb(this.color);
          ctx.fillStyle = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${this.opacity})`;
          ctx.fill();
          ctx.shadowBlur = this.size * 2; // გლოუ ეფექტის შემცირება
          ctx.shadowColor = this.color;
          ctx.shadowOffsetX = 0;
          ctx.shadowOffsetY = 0;
        }
      }
      function initParticles() {
        particles = [];
        const particleCount = 80; // ნაწილაკების რაოდენობის შემცირება
        const colors = [accentColor1, accentColor2, "#e2e8f0", "#ffffff"];
        for (let i = 0; i < particleCount; i++) {
          const x = Math.random() * canvas.width;
          const y = Math.random() * canvas.height;
          const size = Math.random() * 1.2 + 0.5; // ზომის დიაპაზონი
          const speedX = Math.random() * 0.4 - 0.2; // სიჩქარის შემცირება
          const speedY = Math.random() * 0.4 - 0.2; // სიჩქარის შემცირება
          const color = colors[Math.floor(Math.random() * colors.length)];
          particles.push(new Particle(x, y, color, size, speedX, speedY));
        }
      }
      function connectParticles() {
        const maxDistance = 100; // კავშირის მანძილის შემცირება
        const mouseConnectDistance = 150; // მაუსთან კავშირის მანძილის შემცირება
        for (let a = 0; a < particles.length; a++) {
          for (let b = a; b < particles.length; b++) {
            const dist = Math.sqrt(
              (particles[a].x - particles[b].x) ** 2 +
                (particles[a].y - particles[b].y) ** 2
            );
            if (dist < maxDistance) {
              ctx.strokeStyle = `rgba(${rgbAccentColor1.r}, ${
                rgbAccentColor1.g
              }, ${rgbAccentColor1.b}, ${0.6 - dist / maxDistance})`;
              ctx.lineWidth = 0.1 + (1 - dist / maxDistance) * 0.4; // ხაზის სისქის დინამიური ცვლილება
              ctx.beginPath();
              ctx.moveTo(particles[a].x, particles[a].y);
              ctx.lineTo(particles[b].x, particles[b].y);
              ctx.stroke();
            }
          }
          if (mouse.x && mouse.y) {
            const mouseDist = Math.sqrt(
              (particles[a].x - mouse.x) ** 2 + (particles[a].y - mouse.y) ** 2
            );
            if (mouseDist < mouseConnectDistance) {
              ctx.strokeStyle = `rgba(${rgbAccentColor2.r}, ${
                rgbAccentColor2.g
              }, ${rgbAccentColor2.b}, ${
                0.7 - mouseDist / mouseConnectDistance
              })`;
              ctx.lineWidth = 0.3 + (1 - mouseDist / mouseConnectDistance) * 1;
              ctx.beginPath();
              ctx.moveTo(particles[a].x, particles[a].y);
              ctx.lineTo(mouse.x, mouse.y);
              ctx.stroke();
            }
          }
        }
      }
      function animateParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.shadowBlur = 0;
        ctx.shadowColor = "transparent";
        for (let i = 0; i < particles.length; i++) {
          particles[i].update();
          particles[i].draw();
        }
        connectParticles();
        requestAnimationFrame(animateParticles);
      }
      initParticles();
      animateParticles();
      document.addEventListener("DOMContentLoaded", function () {
        const buttons = document.querySelectorAll(".submit-btn, .toggle-btn");
        buttons.forEach((button) => {
          button.addEventListener("click", function (e) {
            const ripple = document.createElement("span");
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            ripple.style.cssText = `
              position: absolute;
              width: ${size}px;
              height: ${size}px;
              left: ${x}px;
              top: ${y}px;
              background: rgba(255, 255, 255, 0.2);
              border-radius: 50%;
              transform: scale(0);
              animation: ripple 0.5s ease-out;
              pointer-events: none;
              z-index: 10;
            `;
            this.appendChild(ripple);
            setTimeout(() => {
              ripple.remove();
            }, 500);
          });
        });
      });
      const styleElement = document.createElement("style");
      styleElement.textContent = `
        @keyframes ripple {
            to {
                transform: scale(2);
                opacity: 0;
            }
        }
      `;
      document.head.appendChild(styleElement);
    </script>
  </body>
</html>
